<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Anton&family=Open+Sans&family=Roboto:wght@100&display=swap" rel="stylesheet">
	<title>BOX Creator</title>
</head>
<body>
	<div class="container">
		<div class="box">1</div>
		<div class="box">2</div>	
		<div class="box">3</div>	
		<div class="box">4</div>	
	</div>
	<div class="container">
		<div class="box">5</div>
		<div class="box">6</div>	
		<div class="box">7</div>	
		<div class="box">8</div>	
	</div>
	<div class="container">
		<div class="box">9</div>
		<div class="box">10</div>	
		<div class="box">11</div>	
		<div class="box">12</div>	
	</div>
	<div class="container">
		<div class="box">13</div>
		<div class="box">14</div>	
		<div class="box">15</div>	
		<div class="box">16</div>	
	</div>

	<div class="panel">
		<form onchange="showValue()" onsubmit="randomValue();return false">
			<input type="range" id="count" min="1" max="16" list="tickmarks" value="16">

			<datalist id="tickmarks">
				<option value="1" label="1">
				<option value="2">
				<option value="3">
				<option value="4" label="4">
				<option value="5">
				<option value="6">
				<option value="7">
				<option value="8" label="8">
				<option value="9">
				<option value="10">
				<option value="11">
				<option value="12" label="12">
				<option value="13">
				<option value="14">
				<option value="15">
				<option value="16" label="16">
			</datalist>
			<div class="bottomPanel">
				<input type="text" id="color">
				<input type="submit" value="Random count + color">
				<p></p>
			</div>
		</form>

	</div>
</body>
<script type="text/javascript">
	function showValue() {
		clearBoxes();

		let x = document.getElementById("count").value;
		let containerCount, maxPoint, maxBoxPerContainer;

		switch (x) {
			case "1":
			case "2":
			case "3":
				containerCount = 1, maxPoint = 0, maxBoxPerContainer = 3;
				break;
			case "4":
				containerCount = 2, maxPoint = 2, maxBoxPerContainer = 2;
				break;
			case "5":
			case "6":
				containerCount = 2, maxPoint = 3, maxBoxPerContainer = 3;
				break;
			case "7":
			case "8":
			case "9":
				containerCount = 3, maxPoint = 6, maxBoxPerContainer = 3;
				break;
			case "10":
			case "11":
			case "12":
				containerCount=3, maxPoint = 8, maxBoxPerContainer = 4;
				break;
			case "13":
			case "14":
			case "15":
			case "16":
				containerCount=4, maxPoint = 12, maxBoxPerContainer = 4;
				break;
	  	default:
    		console.log('default must be here');
		}

		let point = 0;
			for (var j = 1; j<=containerCount; j++) {
				let cont = document.createElement('div');
				cont.className = 'container';
				let buf = "";

				if (point>=maxPoint) {
					for (var i=1; i<=x-maxPoint; i++){
						point++;
						buf += '<div class="box">'+point+'</div>';
					}
					cont.innerHTML = buf;
					document.body.appendChild(cont);
				} else {
					for (var i=1; i<=maxBoxPerContainer; i++){
						point++;
						buf += '<div class="box">'+point+'</div>';
					}
					cont.innerHTML = buf;
					document.body.appendChild(cont);
				}	
			}

		let col = document.getElementById('color').value;
		paintBoxes(col);
	}

	function clearBoxes() {
		let arr = document.getElementsByClassName('container');
		let k = arr.length;
		for (var i=0; i<k; i++){
			arr[0].remove();
		}
	}

	function paintBoxes(color) {
		let introList = document.querySelectorAll('.box');

		for (let i = 0, length = introList.length; i < length; i++) {
			introList[i].style.cssText = 'background-color: ' + color;
		}
	}

	function randomValue() {
		let bufCount = getRandomIntInclusive(1,16);
		let colorArr = ['AliceBlue','AntiqueWhite','Aqua','Aquamarine','Azure','Beige','Bisque','Black','BlanchedAlmond','Blue','BlueViolet','Brown','BurlyWood','CadetBlue','Chartreuse','Chocolate','Coral','CornflowerBlue','Cornsilk','Crimson','Cyan','DarkBlue','DarkCyan','DarkGoldenRod','DarkGray','DarkGrey','DarkGreen','DarkKhaki','DarkMagenta','DarkOliveGreen','DarkOrange','DarkOrchid','DarkRed','DarkSalmon','DarkSeaGreen','DarkSlateBlue','DarkSlateGray','DarkSlateGrey','DarkTurquoise','DarkViolet','DeepPink','DeepSkyBlue','DimGray','DimGrey','DodgerBlue','FireBrick','FloralWhite','ForestGreen','Fuchsia','Gainsboro','GhostWhite','Gold','GoldenRod','Gray','Grey','Green','GreenYellow','HoneyDew','HotPink','IndianRed','Indigo','Ivory','Khaki','Lavender','LavenderBlush','LawnGreen','LemonChiffon','LightBlue','LightCoral','LightCyan','LightGoldenRodYellow','LightGray','LightGrey','LightGreen','LightPink','LightSalmon','LightSeaGreen','LightSkyBlue','LightSlateGray','LightSlateGrey','LightSteelBlue','LightYellow','Lime','LimeGreen','Linen','Magenta','Maroon','MediumAquaMarine','MediumBlue','MediumOrchid','MediumPurple','MediumSeaGreen','MediumSlateBlue','MediumSpringGreen','MediumTurquoise','MediumVioletRed','MidnightBlue','MintCream','MistyRose','Moccasin','NavajoWhite','Navy','OldLace','Olive','OliveDrab','Orange','OrangeRed','Orchid','PaleGoldenRod','PaleGreen','PaleTurquoise','PaleVioletRed','PapayaWhip','PeachPuff','Peru','Pink','Plum','PowderBlue','Purple','RebeccaPurple','Red','RosyBrown','RoyalBlue','SaddleBrown','Salmon','SandyBrown','SeaGreen','SeaShell','Sienna','Silver','SkyBlue','SlateBlue','SlateGray','SlateGrey','Snow','SpringGreen','SteelBlue','Tan','Teal','Thistle','Tomato','Turquoise','Violet','Wheat','White','WhiteSmoke','Yellow','YellowGreen'];
		let bufColorInt = getRandomIntInclusive(0,147);
		let output = document.querySelectorAll('p');
		document.getElementById('count').value = bufCount;
		paintBoxes(colorArr[bufColorInt]);
		output[0].textContent = bufCount===1 ? bufCount + ' ' + colorArr[bufColorInt] + ' box' : bufCount + ' ' + colorArr[bufColorInt] + ' boxes';
	}

	function getRandomIntInclusive(min, max) {
	  min = Math.ceil(min);
	  max = Math.floor(max);
	  return Math.floor(Math.random() * (max - min + 1)) + min; //Максимум и минимум включаются (взято с MSDN)
	}
</script>
</html>